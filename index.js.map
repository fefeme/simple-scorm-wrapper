{"version":3,"file":"index.js.map","sources":["src/utils.js","src/index.js"],"sourcesContent":["const pad = (num, size) => {\n  let s = String(num);\n  while (s.length < size) s = `0${s}`;\n  return s;\n};\n\nexport function isFunction(v) {\n  return typeof v === 'function' || false; // avoid IE problems\n}\n\nfunction centisecsToISODuration(n, bPrecise) {\n  var str = \"P\";\n  var nCs = n;\n  var nY = 0,\n    nM = 0,\n    nD = 0,\n    nH = 0,\n    nMin = 0,\n    nS = 0;\n  n = Math.max(n, 0); // there is no such thing as a negative duration\n  var nCs = n;\n  // Next set of operations uses whole seconds\n  nCs = Math.round(nCs);\n  if (bPrecise == true) {\n    nD = Math.floor(nCs / 8640000);\n  } else {\n    nY = Math.floor(nCs / 3155760000);\n    nCs -= nY * 3155760000;\n    nM = Math.floor(nCs / 262980000);\n    nCs -= nM * 262980000;\n    nD = Math.floor(nCs / 8640000);\n  }\n  nCs -= nD * 8640000;\n  nH = Math.floor(nCs / 360000);\n  nCs -= nH * 360000;\n  var nMin = Math.floor(nCs / 6000);\n  nCs -= nMin * 6000\n    // Now we can construct string\n  if (nY > 0) str += nY + \"Y\";\n  if (nM > 0) str += nM + \"M\";\n  if (nD > 0) str += nD + \"D\";\n  if ((nH > 0) || (nMin > 0) || (nCs > 0)) {\n    str += \"T\";\n    if (nH > 0) str += nH + \"H\";\n    if (nMin > 0) str += nMin + \"M\";\n    if (nCs > 0) str += (nCs / 100) + \"S\";\n  }\n  if (str == \"P\") str = \"PT0H0M0S\";\n  // technically PT0S should do but SCORM test suite assumes longer form.\n  return str;\n}\n\nexport function isDomElement(value) {\n  return !!value && typeof value === 'object' && value.nodeType === 1;\n};\n\nexport function formatTime(duration, version = \"1.2\") {\n  if (version != \"1.2\") {\n    return centisecsToISODuration(Math.round(duration / 1000) * 100, true);\n  } else {\n    var milliseconds = parseInt((duration % 1000) / 100),\n      seconds = parseInt((duration / 1000) % 60),\n      minutes = parseInt((duration / (1000 * 60)) % 60),\n      hours = parseInt((duration / (1000 * 60 * 60)) % 24);\n\n    hours = pad(hours, 4);\n    minutes = pad(minutes, 2);\n    seconds = pad(seconds, 2);\n\n    return hours + \":\" + minutes + \":\" + seconds + \".\" + milliseconds;\n  }\n};\n\nexport function inArray(arr, item) {\n  return arr.indexOf(item) > -1;\n}\n\nexport let deepmerge = (function() {\n  let dp = function(target, src) {\n    if (src) {\n      var array = Array.isArray(src);\n      var dst = array && [] || {};\n\n      if (array) {\n        target = target || [];\n        dst = dst.concat(target);\n        src.forEach(function(e, i) {\n          if (typeof dst[i] === 'undefined') {\n            dst[i] = e;\n          } else if (typeof e === 'object') {\n            dst[i] = dp(target[i], e);\n          } else {\n            if (target.indexOf(e) === -1) {\n              dst.push(e);\n            }\n          }\n        });\n      } else {\n        if (target && typeof target === 'object') {\n          Object.keys(target).forEach(function(key) {\n            dst[key] = target[key];\n          })\n        }\n        Object.keys(src).forEach(function(key) {\n          if (typeof src[key] !== 'object' || !src[key]) {\n            dst[key] = src[key];\n          } else {\n            if (!target[key]) {\n              dst[key] = src[key];\n            } else {\n              dst[key] = dp(target[key], src[key]);\n            }\n          }\n        });\n      }\n      return dst;\n    } else {\n      target = target || [];\n      return target;\n    }\n  }\n  return dp;\n})()\n\nexport let scaleNumberBelow = (function(){\n  let sc = function(value, max) {\n    if(value > max){\n      return sc(value/10, max);\n    }else{\n      return value;\n    }\n  }\n  return sc;\n})()\n\nexport let scorm_params = {\n  \"1.2\": {\n    id: \"cmi.core.student_id\",\n    name: \"cmi.core.student_name\",\n    language: \"cmi.student_preference.language\",\n    audio: \"cmi.student_preference.audio\",\n    location: \"cmi.core.lesson_location\",\n    credit: \"cmi.core.credit\",\n    entry: \"cmi.core.entry\",\n    launch_data: \"cmi.launch_data\",\n    lesson_mode: \"cmi.core.lesson_mode\",\n    max_time_allowed: \"cmi.student_data.max_time_allowed\",\n    session_time: \"cmi.core.session_time\",\n    \"score.min\": \"cmi.core.score.min\",\n    \"score.max\": \"cmi.core.score.max\",\n    \"score.raw\": \"cmi.core.score.raw\",\n    \"score.scaled\": \"cmi.core.score.raw\",\n    suspend_data: \"cmi.suspend_data\",\n    status: \"cmi.core.lesson_status\",\n    total_time: \"cmi.core.total_time\"\n  },\n  \"2004\": {\n    id: \"cmi.learner_id\",\n    name: \"cmi.learner_name\",\n    language: \"cmi.learner_preference.language\",\n    audio: \"cmi.learner_preference.audio_level\",\n    location: \"cmi.location\",\n    credit: \"cmi.credit\",\n    entry: \"cmi.entry\",\n    launch_data: \"cmi.launch_data\",\n    lesson_mode: \"cmi.mode\",\n    max_time_allowed: \"cmi.max_time_allowed\",\n    session_time: \"cmi.session_time\",\n    \"score.min\": \"cmi.score.min\",\n    \"score.max\": \"cmi.score.max\",\n    \"score.raw\": \"cmi.score.raw\",\n    \"score.scaled\": \"cmi.score.scaled\",\n    suspend_data: \"cmi.suspend_data\",\n    status: \"cmi.completion_status\",\n    total_time: \"cmi.total_time\"\n  }\n}\n\nexport default null;","import {\n\tformatTime,\n\tscorm_params,\n\tdeepmerge,\n\tisFunction,\n\tinArray,\n\tscaleNumberBelow,\n\tisDomElement\n} from './utils.js'\n\nconst _NoError = {\n\t\"code\": \"0\",\n\t\"string\": \"No Error\",\n\t\"diagnostic\": \"No Error\"\n};;\nconst _GeneralException = {\n\t\"code\": \"101\",\n\t\"string\": \"General Exception\",\n\t\"diagnostic\": \"General Exception\"\n};\nconst _AlreadyInitialized = {\n\t\"code\": \"103\",\n\t\"string\": \"Already Initialized\",\n\t\"diagnostic\": \"Already Initialized\"\n};\n\nconst defaults_confirm = {\n\tconfirm: false,\n\tlabel: \"Are you sure you want to quit the program ?\"\n}\n\nconst exitValues = [\"\", \"normal\", \"suspend\", \"logout\"];\n\nconst noOp = function noOp() {}\n\nlet ErrorHandler = function(sc) {\n\tlet error = {\n\t\t\"code\": _NoError.code,\n\t\t\"string\": _NoError.string,\n\t\t\"diagnostic\": _NoError.diagnostic\n\t};\n\tlet api = sc.getApiHandle();\n\tif (api == null) {\n\t\terror.code = _GeneralException.code;\n\t\terror.string = _GeneralException.string;\n\t\terror.diagnostic = \"Unable to locate the LMS's API Implementation. Cannot determine LMS error code.\";\n\t\tsc.message(error, \"Unable to locate the LMS's API Implementation.\\nCannot determine LMS error code.\");\n\t\treturn error;\n\t}\n\n\t// check for errors caused by or from the LMS\n\terror.code = sc.getLastError().toString();\n\tif (error.code != _NoError.code) {\n\t\t// an error was encountered so display the error description\n\t\terror.string = sc.getErrorString(error.code);\n\t\terror.diagnostic = sc.getDiagnostic(\"\");\n\t}\n\n\treturn error;\n}\n\nexport default class Scorm {\n\tconstructor(settings = {}, init) {\n\t\tthis.version = settings.version || null;\n\t\tif(this.version != null){\n\t\t\tthis.version = this.version.toString();\n\t\t}\n\t\tthis.initialized = false;\n\t\tthis.api = null;\n\t\tthis.exitValue = settings.exitValue || null;\n\t\tthis.prefix = \"\";\n\t\tthis.completion_status = null;\n\t\tthis.message = settings.debugger || noOp;\n\t\tthis.finished = false;\n\t\tthis.startTime = new Date().getTime();\n\t\tthis.idleTime = 0;\n\t\tthis.window = null;\n\t\tthis.scoreMin = null;\n\t\tthis.scoreMax = null;\n\t\tthis.storage = {};\n\t\tthis.params = (v) => {\n\t\t\treturn scorm_params[this.version][v] || \"\";\n\t\t};\n\t\tlet result = this.initialize();\n\t\tif (result != \"true\") {\n\t\t\tif (isFunction(init)) {\n\t\t\t\tinit.bind(this)(result);\n\t\t\t}\n\t\t\treturn false;\n\t\t} else {\n\n\t\t\twindow.onunload = (event) => {\n\t\t\t\tif (!this.finished) {\n\t\t\t\t\tthis.terminate();\n\t\t\t\t}\n\t\t\t};\n\t\t\twindow.onbeforeunload = (event) => {\n\t\t\t\tif (!this.finished) {\n\t\t\t\t\tthis.terminate();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (settings.score != null) {\n\t\t\t\tif (!settings.score.min) settings.score.min = 0;\n\t\t\t\tthis.scoreMin = scaleNumberBelow(settings.score.min, 100);\n\t\t\t\tthis.setValue(this.params('score.min'), settings.score.min);\n\t\t\t\tif (!settings.score.max) settings.score.max = 100;\n\t\t\t\tthis.scoreMax = scaleNumberBelow(settings.score.max, 100);\n\t\t\t\tthis.setValue(this.params('score.max'), settings.score.max);\n\t\t\t}\n\n\t\t\tif (isFunction(init)) {\n\t\t\t\tinit.bind(this)(result);\n\t\t\t}\n\n\t\t\treturn this;\n\t\t}\n\t}\n\n\tuserName() {\n\t\treturn this.getValue(this.params('name'));\n\t}\n\n\tuserId() {\n\t\treturn this.getValue(this.params('id'));\n\t}\n\n\t/**\n\t * bindClose\n\t * @description bindClose and close window\n\t */\n\tbindCloseToElement(el, config) {\n\t\tlet settings = deepmerge(defaults_confirm, config);\n\t\tif (isDomElement(el)) {\n\t\t\tel.addEventListener('click', () => {\n\t\t\t\tlet x = true;\n\t\t\t\tif (settings.confirm) {\n\t\t\t\t\tx = false;\n\t\t\t\t\tif (confirm(settings.label) == true) {\n\t\t\t\t\t\tx = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tx = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (x) {\n\t\t\t\t\tlet result = this.terminate();\n\t\t\t\t\tif (result == \"true\") {\n\t\t\t\t\t\twindow.top.close();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tstatus(value) {\n\t\tlet cmi = \"\";\n\t\tswitch (this.version) {\n\t\t\tcase \"1.2\":\n\t\t\t\tcmi = \"cmi.core.lesson_status\";\n\t\t\t\tbreak;\n\t\t\tcase \"2004\":\n\t\t\t\tcmi = \"cmi.completion_status\";\n\t\t\t\tbreak;\n\t\t}\n\t\tif (value != null) {\n\t\t\tlet values = {\n\t\t\t\t\"1.2\": [\"not attempted\", \"completed\", \"incomplete\", \"passed\", \"failed\", \"browsed\"],\n\t\t\t\t\"2004\": [\"not attempted\", \"completed\", \"incomplete\", \"unknown\"]\n\t\t\t};\n\t\t\tlet permitedValues = values[this.version];\n\t\t\tif (inArray(permitedValues, value)) {\n\t\t\t\treturn this.setValue(cmi, value);\n\t\t\t} else {\n\t\t\t\tthis.message(_NoError, \"status value not supported\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else {\n\t\t\treturn this.getValue(cmi);\n\t\t}\n\t}\n\n\tscore(value) {\n\t\tlet r = null;\n\t\tif (value != null) {\n\t\t\tlet scaledScore = 0;\n\t\t\tvalue = scaleNumberBelow(value, 100);\n\t\t\tif (this.version != \"1.2\") {\n\t\t\t\tscaledScore = ((value - this.scoreMin) / (this.scoreMax - this.scoreMin));\n\t\t\t\tthis.setValue(this.params('score.raw'), value);\n\t\t\t\tthis.setValue(\"cmi.score.scaled\", scaledScore);\n\t\t\t} else {\n\t\t\t\tscaledScore = ((value - this.scoreMin) * (100 / (this.scoreMax - this.scoreMin)));\n\t\t\t\tthis.setValue(this.params('score.raw'), scaledScore);\n\t\t\t}\n\n\t\t\tif (value >= this.scoreMax) {\n\t\t\t\tif (this.version != \"1.2\") {\n\t\t\t\t\tthis.setValue(\"cmi.success_status\", \"passed\");\n\t\t\t\t} else {\n\t\t\t\t\tthis.status(\"passed\");\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tr = parseInt(this.getValue(this.params('score.raw')));\n\t\t}\n\t\treturn r;\n\t}\n\n\tsuccess(v) {\n\t\tif (v != null) {\n\t\t\tif (v) {\n\t\t\t\tif (this.version != \"1.2\") {\n\t\t\t\t\tthis.setValue(\"cmi.success_status\", \"passed\");\n\t\t\t\t} else {\n\t\t\t\t\tthis.status(\"passed\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this.version != \"1.2\") {\n\t\t\t\t\tthis.setValue(\"cmi.success_status\", \"failed\");\n\t\t\t\t} else {\n\t\t\t\t\tthis.status(\"failed\");\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.version != \"1.2\") {\n\t\t\t\treturn this.getValue(\"cmi.success_status\");\n\t\t\t} else {\n\t\t\t\treturn this.status();\n\t\t\t}\n\t\t}\n\t}\n\n\tsuspend_data(value) {\n\t\tif (value != null) {\n\t\t\tthis.storage = deepmerge(this.storage, value);\n\t\t\tthis.setValue(this.params('suspend_data'), JSON.stringify(this.storage));\n\t\t} else {\n\t\t\tlet data = this.getValue(this.params('suspend_data'));\n\t\t\tif (data) {\n\t\t\t\tthis.storage = JSON.parse(data);\n\t\t\t}else{\n\t\t\t\tthis.setValue(this.params('suspend_data'), JSON.stringify(this.storage));\n\t\t\t}\n\t\t\treturn this.storage;\n\t\t}\n\t}\n\n\tlanguage(value) {\n\t\tif (value != null) {\n\t\t\tthis.suspend_data({\n\t\t\t\tlng: value\n\t\t\t});\n\t\t} else {\n\t\t\treturn this.getValue(this.params(\"language\"));\n\t\t}\n\t}\n\n\tlocation(value) {\n\t\tif (value != null) {\n\t\t\tthis.setValue(this.params('location'), value);\n\t\t}\n\t\treturn this.getValue(this.params('location'));\n\t}\n\n\tsession_time(v) {\n\t\tif (this.startTime != null) {\n\t\t\tlet sessionTime = new Date().getTime() - this.startTime + this.idleTime;\n\t\t\tif (v != null) {\n\t\t\t\tif (sessionTime > 1000) {\n\t\t\t\t\tthis.setValue(this.params('session_time'), formatTime(sessionTime, this.version));\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn formatTime(sessionTime, this.version);\n\t\t}\n\t}\n\n\ttotal_time() {\n\t\treturn this.getValue(this.params('total_time'));\n\t}\n\n\tinitialize() {\n\t\tif (this.initialized) return \"true\";\n\t\tlet api = this.getApiHandle();\n\t\tif (api == null) {\n\t\t\tthis.message(_GeneralException, \"Unable to locate the LMS's API Implementation.\\n\" + this.prefix + \"Initialize was not successful.\");\n\t\t\treturn \"false\";\n\t\t}\n\t\tlet cmd = this.prefix + \"Initialize\";\n\t\tlet result = api[cmd](\"\");\n\t\tif (result.toString() != \"true\") {\n\t\t\tlet err = ErrorHandler(this);\n\t\t\tthis.message(err, cmd + \" failed with error code: \" + err.code, \"initialize\");\n\t\t} else {\n\t\t\tthis.initialized = true;\n\t\t\tlet completionStatus = this.status();\n\t\t\tif (completionStatus) {\n\t\t\t\tswitch (completionStatus) {\n\t\t\t\t\t//Both SCORM 1.2 and 2004\n\t\t\t\t\tcase \"not attempted\":\n\t\t\t\t\t\tthis.status(\"incomplete\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t//SCORM 2004 only\n\t\t\t\t\tcase \"unknown\":\n\t\t\t\t\t\tthis.status(\"incomplete\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t//Additional options, presented here in case you'd like to use them\n\t\t\t\t\t\t//case \"completed\"  : break;\n\t\t\t\t\t\t//case \"incomplete\" : break;\n\t\t\t\t\t\t//case \"passed\"     : break;    //SCORM 1.2 only\n\t\t\t\t\t\t//case \"failed\"     : break;    //SCORM 1.2 only\n\t\t\t\t\t\t//case \"browsed\"    : break;    //SCORM 1.2 only\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result.toString();\n\t}\n\tbeforeTerminate(){\n\n\t}\n\tterminate(value = \"\") {\n\t\tif (!this.initialized) return \"true\";\n\t\tlet api = this.getApiHandle();\n\t\tlet result = \"false\";\n\t\tif (api == null) {\n\t\t\tthis.message(_GeneralException, \"Unable to locate the LMS's API Implementation.\\n\" + this.prefix + \"Finish was not successful.\");\n\t\t\treturn \"false\";\n\t\t} else {\n\t\t\tlet success = false;\n\t\t\tlet exitValue = value;\n\n\t\t\tif (value === \"logout\" || value === \"normal\") {\n\t\t\t\tif (this.version === \"1.2\") {\n\t\t\t\t\texitValue = \"logout\";\n\t\t\t\t} else {\n\t\t\t\t\texitValue = \"normal\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.completion_status !== \"completed\" && this.completion_status !== \"passed\") {\n\t\t\t\texitValue = \"suspend\";\n\t\t\t}\n\n\t\t\tif(inArray(exitValues,this.exitValue)) exitValue = this.exitValue;\n\n\t\t\tthis.session_time(\"save\");\n\t\t\tif(isFunction(this.beforeTerminate)){\n\t\t\t\tthis.beforeTerminate();\n\t\t\t}\n\t\t\tsuccess = this.commit();\n\n\t\t\t// call the LMSFinish function that should be implemented by the API\n\t\t\tlet _terminate = noOp;\n\t\t\tlet cmd = \"Terminate\";\n\t\t\tif (this.version === \"1.2\") {\n\t\t\t\tsuccess = this.setValue(\"cmi.core.exit\", exitValue);\n\t\t\t\tcmd = \"LMSFinish\";\n\t\t\t\t_terminate = function(v) {\n\t\t\t\t\treturn api.LMSFinish(v);\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tsuccess = this.setValue(\"cmi.exit\", exitValue);\n\t\t\t\tcmd = \"Terminate\";\n\t\t\t\t_terminate = function(v) {\n\t\t\t\t\treturn api.Terminate(v);\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (success == \"true\") {\n\t\t\t\tresult = _terminate(\"\");\n\t\t\t\tif (result.toString() != \"true\") {\n\t\t\t\t\tlet err = ErrorHandler(this);\n\t\t\t\t\tthis.message(err, cmd + \" failed with error code: \" + err.code, \"terminate\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.initialized = false;\n\t\tif (this.finished != \"true\") {\n\t\t\tthis.finished = result.toString();\n\t\t}\n\t\treturn result.toString();\n\t}\n\tgetValue(parameter) {\n\t\tlet api = this.getApiHandle();\n\t\tlet result = \"\";\n\t\tlet cmd = this.prefix + \"GetValue\";\n\t\tif (api == null) {\n\t\t\tthis.message(_GeneralException, \"Unable to locate the LMS's API Implementation.\\nLMSGetValue was not successful.\");\n\t\t} else if (!this.initialized && !this.initialize()) {\n\t\t\tlet err = ErrorHandler(this); // get why initialize() returned false\n\t\t\tthis.message(err, cmd + \" failed - Could not initialize communication with the LMS - error code: \" + err.code);\n\t\t} else {\n\t\t\tresult = api[cmd](parameter);\n\n\t\t\tlet error = ErrorHandler(this);\n\t\t\tif (error.code != _NoError.code) {\n\t\t\t\t// an error was encountered so display the error description\n\t\t\t\tthis.message(error, cmd + \"(\" + parameter + \") failed. \\n\" + error.code + \": \" + error.string, \"getValue\", parameter);\n\t\t\t\tresult = \"\";\n\t\t\t} else {\n\t\t\t\tswitch (parameter) {\n\t\t\t\t\tcase \"cmi.core.lesson_status\":\n\t\t\t\t\tcase \"cmi.completion_status\":\n\t\t\t\t\t\tthis.completion_status = result;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t// case \"cmi.core.exit\":\n\t\t\t\t\t\t// case \"cmi.exit\":\n\t\t\t\t\t\t// \tthis.exit_status = result;\n\t\t\t\t\t\t// \tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn result.toString();\n\t}\n\tsetValue(parameter, value) {\n\t\tlet api = this.getApiHandle();\n\t\tlet result = \"false\";\n\t\tlet cmd = this.prefix + \"SetValue\";\n\t\tif (api == null) {\n\t\t\tthis.message(_GeneralException, \"Unable to locate the LMS's API Implementation.\\nLMSSetValue was not successful.\");\n\t\t} else if (!this.initialized && !this.initialize()) {\n\t\t\tlet err = ErrorHandler(this); // get why initialize() returned false\n\t\t\tthis.message(err, cmd + \" failed - Could not initialize communication with the LMS - error code: \" + err.code);\n\t\t} else {\n\t\t\tresult = api[cmd](parameter, value);\n\t\t\tif (result.toString() != \"true\") {\n\t\t\t\tlet err = ErrorHandler(this);\n\t\t\t\tthis.message(err, cmd + \"(\" + parameter + \", \" + value + \") failed. \\n\" + err.code + \": \" + err.string, \"setValue\", parameter);\n\t\t\t} else {\n\t\t\t\tif (parameter === \"cmi.core.lesson_status\" || parameter === \"cmi.completion_status\") {\n\t\t\t\t\tthis.completion_status = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result.toString();\n\t}\n\tcommit() {\n\t\tlet api = this.getApiHandle();\n\t\tlet result = \"false\";\n\t\tlet cmd = this.prefix + \"Commit\";\n\t\tif (api == null) {\n\t\t\tthis.message(_GeneralException, \"Unable to locate the LMS's API Implementation.\\nLMSCommit was not successful.\");\n\t\t} else if (!this.initialized && !this.initialize()) {\n\t\t\tlet err = ErrorHandler(this); // get why initialize() returned false\n\t\t\tthis.message(err, cmd + \" failed - Could not initialize communication with the LMS - error code: \" + err.code);\n\t\t} else {\n\t\t\tresult = api[cmd](\"\");\n\t\t\tif (result != \"true\") {\n\t\t\t\tlet err = ErrorHandler(this);\n\t\t\t\tthis.message(err, cmd + \" failed - error code: \" + err.code, \"commit\");\n\t\t\t}\n\t\t}\n\n\t\treturn result.toString();\n\t}\n\tgetLastError() {\n\t\tlet api = this.getApiHandle();\n\t\tif (api == null) {\n\t\t\t//since we can't get the error code from the LMS, return a general error\n\t\t\treturn _GeneralException.code; //General Exception\n\t\t}\n\t\treturn api[this.prefix + \"GetLastError\"]().toString();\n\t}\n\tgetErrorString(errorCode) {\n\t\tlet api = this.getApiHandle();\n\t\tif (api == null) {\n\t\t\treturn _GeneralException.string;\n\t\t}\n\t\treturn api[this.prefix + \"GetErrorString\"](errorCode).toString();\n\t}\n\tgetDiagnostic(errorCode) {\n\t\tlet api = this.getApiHandle();\n\t\tif (api == null) {\n\t\t\treturn \"Unable to locate the LMS's API Implementation. LMSGetDiagnostic was not successful.\";\n\t\t}\n\t\treturn api[this.prefix + \"GetDiagnostic\"](errorCode).toString();\n\t}\n\tgetApiHandle() {\n\t\tif (this.api == null) {\n\t\t\tthis.api = this.getApi();\n\t\t}\n\t\treturn this.api;\n\t}\n\tfindAPI(win) {\n\t\tlet api = null;\n\t\tlet findAPITries = 0;\n\t\twhile ((!win.API && !win.API_1484_11) &&\n\t\t\t(win.parent) &&\n\t\t\t(win.parent != win) &&\n\t\t\t(findAPITries <= 500)) {\n\t\t\tfindAPITries++;\n\t\t\twin = win.parent;\n\t\t}\n\t\tthis.window = win;\n\t\tif (win.API_1484_11 != null && win.API != null && this.version != null) {\n\t\t\tif (this.version == \"1.2\") {\n\t\t\t\tthis.prefix = \"LMS\";\n\t\t\t\tapi = win.API;\n\t\t\t}\n\t\t\tif (this.version == \"2004\") {\n\t\t\t\tthis.prefix = \"\";\n\t\t\t\tapi = win.API_1484_11;\n\t\t\t}\n\t\t} else {\n\t\t\tif (win.API_1484_11) {\n\t\t\t\tthis.version = \"2004\";\n\t\t\t\tthis.prefix = \"\";\n\t\t\t\tapi = win.API_1484_11;\n\t\t\t} else if (win.API) {\n\t\t\t\tthis.version = \"1.2\";\n\t\t\t\tthis.prefix = \"LMS\";\n\t\t\t\tapi = win.API;\n\t\t\t}\n\t\t}\n\t\treturn api;\n\t}\n\tgetApi() {\n\t\tlet theAPI = this.findAPI(window);\n\n\t\tif (!theAPI && window.parent && window.parent != window) {\n\t\t\ttheAPI = this.findAPI(window.parent);\n\t\t}\n\n\t\tif (!theAPI && window.opener && window.opener) {\n\t\t\ttheAPI = this.findAPI(window.opener);\n\t\t}\n\n\t\tif (!theAPI && window.top && window.top.opener) {\n\t\t\ttheAPI = this.findAPI(window.top.opener);\n\t\t}\n\n\t\t//Special handling for Plateau\n\t\tif (!theAPI && window.top && window.top.opener && window.top.opener.document) {\n\t\t\ttheAPI = this.findAPI(window.top.opener.document);\n\t\t}\n\n\t\treturn theAPI;\n\t}\n\n\t//2004 Scorm version related\n\n\tfindObjective(objId) {\n\t\tif (this.version !== \"2004\") return;\n\t\tlet num = this.getValue(\"cmi.objectives._count\");\n\t\tlet objIndex = -1;\n\n\t\tfor (let i = 0; i < num; ++i) {\n\t\t\tif (this.getValue(\"cmi.objectives.\" + i + \".id\") == objId) {\n\t\t\t\tobjIndex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (objIndex == -1) {\n\t\t\tthis.message(_GeneralException, \"Objective \" + objId + \" not found.\");\n\t\t\tobjIndex = num;\n\t\t\tthis.message(_GeneralException, \"Creating new objective at index \" + objIndex);\n\t\t\tthis.setValue(\"cmi.objectives.\" + objIndex + \".id\", objId);\n\t\t}\n\t\treturn objIndex;\n\t}\n\t/**\n\t * [findDataStore description]\n\t * @param  {[string]} id [description]\n\t * @return {[integer]}    [data store index]\n\t */\n\tfindDataStore(id) {\n\t\tif (this.version !== \"2004\") return;\n\t\tlet num = this.getValue(\"adl.data._count\");\n\t\tlet index = -1;\n\n\t\t// if the get value was not null and is a number\n\t\t// in other words, we got an index in the adl.data array\n\t\tif (num != null && !isNaN(num)) {\n\t\t\tfor (let i = 0; i < num; ++i) {\n\t\t\t\tif (this.getValue(\"adl.data.\" + i + \".id\") == id) {\n\t\t\t\t\tindex = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (index == -1) {\n\t\t\t\tthis.message(_GeneralException, \"Data store \" + id + \" not found.\");\n\t\t\t}\n\t\t}\n\n\t\treturn index;\n\t}\n}"],"names":["const","let","this","err"],"mappings":";;;;;;;;;;AAAAA,IAAM,GAAG,aAAI,GAAG,EAAE,IAAI,EAAE;EACtBC,IAAI,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC;EACpB,OAAO,CAAC,CAAC,MAAM,GAAG,IAAI,IAAE,CAAC,GAAG,MAAI,CAAG,GAAC;EACpC,OAAO,CAAC,CAAC;CACV,CAAC;;AAEF,AAAO,SAAS,UAAU,CAAC,CAAC,EAAE;EAC5B,OAAO,OAAO,CAAC,KAAK,UAAU,IAAI,KAAK,CAAC;CACzC;;AAED,SAAS,sBAAsB,CAAC,CAAC,EAAE,QAAQ,EAAE;EAC3C,IAAI,GAAG,GAAG,GAAG,CAAC;EACd,IAAI,GAAG,GAAG,CAAC,CAAC;EACZ,IAAI,EAAE,GAAG,CAAC;IACR,EAAE,GAAG,CAAC;IACN,EAAE,GAAG,CAAC;IACN,EAAE,GAAG,CAAC;IACN,IAAI,GAAG,CAAC,CACD;EACT,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EACnB,IAAI,GAAG,GAAG,CAAC,CAAC;;EAEZ,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;EACtB,IAAI,QAAQ,IAAI,IAAI,EAAE;IACpB,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,OAAO,CAAC,CAAC;GAChC,MAAM;IACL,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,UAAU,CAAC,CAAC;IAClC,GAAG,IAAI,EAAE,GAAG,UAAU,CAAC;IACvB,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,SAAS,CAAC,CAAC;IACjC,GAAG,IAAI,EAAE,GAAG,SAAS,CAAC;IACtB,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,OAAO,CAAC,CAAC;GAChC;EACD,GAAG,IAAI,EAAE,GAAG,OAAO,CAAC;EACpB,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,MAAM,CAAC,CAAC;EAC9B,GAAG,IAAI,EAAE,GAAG,MAAM,CAAC;EACnB,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,CAAC;EAClC,GAAG,IAAI,IAAI,GAAG,KAAI;;EAElB,IAAI,EAAE,GAAG,CAAC,IAAE,GAAG,IAAI,EAAE,GAAG,GAAG,GAAC;EAC5B,IAAI,EAAE,GAAG,CAAC,IAAE,GAAG,IAAI,EAAE,GAAG,GAAG,GAAC;EAC5B,IAAI,EAAE,GAAG,CAAC,IAAE,GAAG,IAAI,EAAE,GAAG,GAAG,GAAC;EAC5B,IAAI,CAAC,EAAE,GAAG,CAAC,MAAM,IAAI,GAAG,CAAC,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC,EAAE;IACvC,GAAG,IAAI,GAAG,CAAC;IACX,IAAI,EAAE,GAAG,CAAC,IAAE,GAAG,IAAI,EAAE,GAAG,GAAG,GAAC;IAC5B,IAAI,IAAI,GAAG,CAAC,IAAE,GAAG,IAAI,IAAI,GAAG,GAAG,GAAC;IAChC,IAAI,GAAG,GAAG,CAAC,IAAE,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,IAAI,GAAG,GAAC;GACvC;EACD,IAAI,GAAG,IAAI,GAAG,IAAE,GAAG,GAAG,UAAU,GAAC;;EAEjC,OAAO,GAAG,CAAC;CACZ;;AAED,AAAO,SAAS,YAAY,CAAC,KAAK,EAAE;EAClC,OAAO,CAAC,CAAC,KAAK,IAAI,OAAO,KAAK,KAAK,QAAQ,IAAI,KAAK,CAAC,QAAQ,KAAK,CAAC,CAAC;CACrE;AAED,AAAO,SAAS,UAAU,CAAC,QAAQ,EAAE,OAAe,EAAE;mCAAV,GAAG;;EAC7C,IAAI,OAAO,IAAI,KAAK,EAAE;IACpB,OAAO,sBAAsB,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC,GAAG,GAAG,EAAE,IAAI,CAAC,CAAC;GACxE,MAAM;IACL,IAAI,YAAY,GAAG,QAAQ,CAAC,CAAC,QAAQ,GAAG,IAAI,IAAI,GAAG,CAAC;MAClD,OAAO,GAAG,QAAQ,CAAC,CAAC,QAAQ,GAAG,IAAI,IAAI,EAAE,CAAC;MAC1C,OAAO,GAAG,QAAQ,CAAC,CAAC,QAAQ,IAAI,IAAI,GAAG,EAAE,CAAC,IAAI,EAAE,CAAC;MACjD,KAAK,GAAG,QAAQ,CAAC,CAAC,QAAQ,IAAI,IAAI,GAAG,EAAE,GAAG,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC;;IAEvD,KAAK,GAAG,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;IACtB,OAAO,GAAG,GAAG,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;IAC1B,OAAO,GAAG,GAAG,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;;IAE1B,OAAO,KAAK,GAAG,GAAG,GAAG,OAAO,GAAG,GAAG,GAAG,OAAO,GAAG,GAAG,GAAG,YAAY,CAAC;GACnE;CACF;AAED,AAAO,SAAS,OAAO,CAAC,GAAG,EAAE,IAAI,EAAE;EACjC,OAAO,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;CAC/B;;AAED,AAAOA,IAAI,SAAS,GAAG,CAAC,WAAW;EACjCA,IAAI,EAAE,GAAG,SAAS,MAAM,EAAE,GAAG,EAAE;IAC7B,IAAI,GAAG,EAAE;MACP,IAAI,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;MAC/B,IAAI,GAAG,GAAG,KAAK,IAAI,EAAE,IAAI,EAAE,CAAC;;MAE5B,IAAI,KAAK,EAAE;QACT,MAAM,GAAG,MAAM,IAAI,EAAE,CAAC;QACtB,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QACzB,GAAG,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE,CAAC,EAAE;UACzB,IAAI,OAAO,GAAG,CAAC,CAAC,CAAC,KAAK,WAAW,EAAE;YACjC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;WACZ,MAAM,IAAI,OAAO,CAAC,KAAK,QAAQ,EAAE;YAChC,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;WAC3B,MAAM;YACL,IAAI,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE;cAC5B,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;aACb;WACF;SACF,CAAC,CAAC;OACJ,MAAM;QACL,IAAI,MAAM,IAAI,OAAO,MAAM,KAAK,QAAQ,EAAE;UACxC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,SAAS,GAAG,EAAE;YACxC,GAAG,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC;WACxB,EAAC;SACH;QACD,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,SAAS,GAAG,EAAE;UACrC,IAAI,OAAO,GAAG,CAAC,GAAG,CAAC,KAAK,QAAQ,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;YAC7C,GAAG,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC;WACrB,MAAM;YACL,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE;cAChB,GAAG,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC;aACrB,MAAM;cACL,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;aACtC;WACF;SACF,CAAC,CAAC;OACJ;MACD,OAAO,GAAG,CAAC;KACZ,MAAM;MACL,MAAM,GAAG,MAAM,IAAI,EAAE,CAAC;MACtB,OAAO,MAAM,CAAC;KACf;IACF;EACD,OAAO,EAAE,CAAC;CACX,IAAG;;AAEJ,AAAOA,IAAI,gBAAgB,GAAG,CAAC,UAAU;EACvCA,IAAI,EAAE,GAAG,SAAS,KAAK,EAAE,GAAG,EAAE;IAC5B,GAAG,KAAK,GAAG,GAAG,CAAC;MACb,OAAO,EAAE,CAAC,KAAK,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;KAC1B,IAAI;MACH,OAAO,KAAK,CAAC;KACd;IACF;EACD,OAAO,EAAE,CAAC;CACX,IAAG;;AAEJ,AAAOA,IAAI,YAAY,GAAG;EACxB,KAAK,EAAE;IACL,EAAE,EAAE,qBAAqB;IACzB,IAAI,EAAE,uBAAuB;IAC7B,QAAQ,EAAE,iCAAiC;IAC3C,KAAK,EAAE,8BAA8B;IACrC,QAAQ,EAAE,0BAA0B;IACpC,MAAM,EAAE,iBAAiB;IACzB,KAAK,EAAE,gBAAgB;IACvB,WAAW,EAAE,iBAAiB;IAC9B,WAAW,EAAE,sBAAsB;IACnC,gBAAgB,EAAE,mCAAmC;IACrD,YAAY,EAAE,uBAAuB;IACrC,WAAW,EAAE,oBAAoB;IACjC,WAAW,EAAE,oBAAoB;IACjC,WAAW,EAAE,oBAAoB;IACjC,cAAc,EAAE,oBAAoB;IACpC,YAAY,EAAE,kBAAkB;IAChC,MAAM,EAAE,wBAAwB;IAChC,UAAU,EAAE,qBAAqB;GAClC;EACD,MAAM,EAAE;IACN,EAAE,EAAE,gBAAgB;IACpB,IAAI,EAAE,kBAAkB;IACxB,QAAQ,EAAE,iCAAiC;IAC3C,KAAK,EAAE,oCAAoC;IAC3C,QAAQ,EAAE,cAAc;IACxB,MAAM,EAAE,YAAY;IACpB,KAAK,EAAE,WAAW;IAClB,WAAW,EAAE,iBAAiB;IAC9B,WAAW,EAAE,UAAU;IACvB,gBAAgB,EAAE,sBAAsB;IACxC,YAAY,EAAE,kBAAkB;IAChC,WAAW,EAAE,eAAe;IAC5B,WAAW,EAAE,eAAe;IAC5B,WAAW,EAAE,eAAe;IAC5B,cAAc,EAAE,kBAAkB;IAClC,YAAY,EAAE,kBAAkB;IAChC,MAAM,EAAE,uBAAuB;IAC/B,UAAU,EAAE,gBAAgB;GAC7B;CACF;;ACtKDD,IAAM,QAAQ,GAAG;CAChB,MAAM,EAAE,GAAG;CACX,QAAQ,EAAE,UAAU;CACpB,YAAY,EAAE,UAAU;CACxB,CAAC,AACFA,IAAM,iBAAiB,GAAG;CACzB,MAAM,EAAE,KAAK;CACb,QAAQ,EAAE,mBAAmB;CAC7B,YAAY,EAAE,mBAAmB;CACjC,CAAC;AACFA;AAMAA,IAAM,gBAAgB,GAAG;CACxB,OAAO,EAAE,KAAK;CACd,KAAK,EAAE,6CAA6C;EACpD;;AAEDA,IAAM,UAAU,GAAG,CAAC,EAAE,EAAE,QAAQ,EAAE,SAAS,EAAE,QAAQ,CAAC,CAAC;;AAEvDA,IAAM,IAAI,GAAG,SAAS,IAAI,GAAG,GAAE;;AAE/BC,IAAI,YAAY,GAAG,SAAS,EAAE,EAAE;CAC/BA,IAAI,KAAK,GAAG;EACX,MAAM,EAAE,QAAQ,CAAC,IAAI;EACrB,QAAQ,EAAE,QAAQ,CAAC,MAAM;EACzB,YAAY,EAAE,QAAQ,CAAC,UAAU;EACjC,CAAC;CACFA,IAAI,GAAG,GAAG,EAAE,CAAC,YAAY,EAAE,CAAC;CAC5B,IAAI,GAAG,IAAI,IAAI,EAAE;EAChB,KAAK,CAAC,IAAI,GAAG,iBAAiB,CAAC,IAAI,CAAC;EACpC,KAAK,CAAC,MAAM,GAAG,iBAAiB,CAAC,MAAM,CAAC;EACxC,KAAK,CAAC,UAAU,GAAG,iFAAiF,CAAC;EACrG,EAAE,CAAC,OAAO,CAAC,KAAK,EAAE,kFAAkF,CAAC,CAAC;EACtG,OAAO,KAAK,CAAC;EACb;;;CAGD,KAAK,CAAC,IAAI,GAAG,EAAE,CAAC,YAAY,EAAE,CAAC,QAAQ,EAAE,CAAC;CAC1C,IAAI,KAAK,CAAC,IAAI,IAAI,QAAQ,CAAC,IAAI,EAAE;;EAEhC,KAAK,CAAC,MAAM,GAAG,EAAE,CAAC,cAAc,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;EAC7C,KAAK,CAAC,UAAU,GAAG,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;EACxC;;CAED,OAAO,KAAK,CAAC;EACb;;AAED,IAAqB,KAAK,GACzB,cAAW,CAAC,QAAa,EAAE,IAAI,EAAE;;oCAAb,GAAG;;CACvB,IAAK,CAAC,OAAO,GAAG,QAAQ,CAAC,OAAO,IAAI,IAAI,CAAC;CACxC,GAAG,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC;EACxB,IAAK,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;EACvC;CACD,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;CACzB,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC;CACjB,IAAK,CAAC,SAAS,GAAG,QAAQ,CAAC,SAAS,IAAI,IAAI,CAAC;CAC5C,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;CACjB,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;CAC/B,IAAK,CAAC,OAAO,GAAG,QAAQ,CAAC,QAAQ,IAAI,IAAI,CAAC;CACzC,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;CACvB,IAAK,CAAC,SAAS,GAAG,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAC;CACtC,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;CAClB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;CACnB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;CACrB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;CACrB,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;CAClB,IAAI,CAAC,MAAM,aAAI,CAAC,EAAE;EACjB,OAAO,YAAY,CAACC,MAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;EAC3C,CAAC;CACH,IAAK,MAAM,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;CAC/B,IAAI,MAAM,IAAI,MAAM,EAAE;EACrB,IAAI,UAAU,CAAC,IAAI,CAAC,EAAE;GACtB,IAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC;GACxB;EACF,OAAQ,KAAK,CAAC;EACb,MAAM;;EAEN,MAAM,CAAC,QAAQ,aAAI,KAAK,EAAE;GACzB,IAAI,CAACA,MAAI,CAAC,QAAQ,EAAE;IACnBA,MAAI,CAAC,SAAS,EAAE,CAAC;IACjB;GACD,CAAC;EACF,MAAM,CAAC,cAAc,aAAI,KAAK,EAAE;GAC/B,IAAI,CAACA,MAAI,CAAC,QAAQ,EAAE;IACnBA,MAAI,CAAC,SAAS,EAAE,CAAC;IACjB;GACD,CAAC;;EAEF,IAAI,QAAQ,CAAC,KAAK,IAAI,IAAI,EAAE;GAC3B,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,IAAE,QAAQ,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,GAAC;GAChD,IAAI,CAAC,QAAQ,GAAG,gBAAgB,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;GAC1D,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,EAAE,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;GAC5D,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,IAAE,QAAQ,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,GAAC;GAClD,IAAI,CAAC,QAAQ,GAAG,gBAAgB,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;GAC1D,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,EAAE,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;GAC5D;;EAED,IAAI,UAAU,CAAC,IAAI,CAAC,EAAE;GACtB,IAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC;GACxB;;EAEF,OAAQ,IAAI,CAAC;EACZ;EACD;;AAEF,gBAAC,gCAAW;CACV,OAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;EAC1C;;AAEF,gBAAC,4BAAS;CACR,OAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;EACxC;;;;;;AAMF,gBAAC,kDAAmB,EAAE,EAAE,MAAM,EAAE;;;CAC/B,IAAK,QAAQ,GAAG,SAAS,CAAC,gBAAgB,EAAE,MAAM,CAAC,CAAC;CACnD,IAAI,YAAY,CAAC,EAAE,CAAC,EAAE;EACrB,EAAE,CAAC,gBAAgB,CAAC,OAAO,cAAK;GAC/BD,IAAI,CAAC,GAAG,IAAI,CAAC;GACb,IAAI,QAAQ,CAAC,OAAO,EAAE;IACtB,CAAE,GAAG,KAAK,CAAC;IACX,IAAK,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,IAAI,EAAE;KACrC,CAAE,GAAG,IAAI,CAAC;KACT,MAAM;KACP,CAAE,GAAG,KAAK,CAAC;KACV;IACD;GACF,IAAK,CAAC,EAAE;IACP,IAAK,MAAM,GAAGC,MAAI,CAAC,SAAS,EAAE,CAAC;IAC9B,IAAI,MAAM,IAAI,MAAM,EAAE;KACrB,MAAM,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC;KACnB;IACD;GACD,CAAC,CAAC;EACH;EACD;;AAEF,gBAAC,0BAAO,KAAK,EAAE;CACbD,IAAI,GAAG,GAAG,EAAE,CAAC;CACd,QAAS,IAAI,CAAC,OAAO;EACnB,KAAK,KAAK;GACV,GAAI,GAAG,wBAAwB,CAAC;GAC/B,MAAM;EACP,KAAK,MAAM;GACX,GAAI,GAAG,uBAAuB,CAAC;GAC9B,MAAM;EACP;CACD,IAAI,KAAK,IAAI,IAAI,EAAE;EACnB,IAAK,MAAM,GAAG;GACZ,KAAK,EAAE,CAAC,eAAe,EAAE,WAAW,EAAE,YAAY,EAAE,QAAQ,EAAE,QAAQ,EAAE,SAAS,CAAC;GACnF,MAAO,EAAE,CAAC,eAAe,EAAE,WAAW,EAAE,YAAY,EAAE,SAAS,CAAC;GAC/D,CAAC;EACH,IAAK,cAAc,GAAG,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;EAC1C,IAAI,OAAO,CAAC,cAAc,EAAE,KAAK,CAAC,EAAE;GACpC,OAAQ,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;GACjC,MAAM;GACP,IAAK,CAAC,OAAO,CAAC,QAAQ,EAAE,4BAA4B,CAAC,CAAC;GACrD,OAAO;GACP;EACD,MAAM;EACN,OAAO,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;EAC1B;EACD;;AAEF,gBAAC,wBAAM,KAAK,EAAE;CACZA,IAAI,CAAC,GAAG,IAAI,CAAC;CACb,IAAI,KAAK,IAAI,IAAI,EAAE;EAClBA,IAAI,WAAW,GAAG,CAAC,CAAC;EACrB,KAAM,GAAG,gBAAgB,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;EACrC,IAAI,IAAI,CAAC,OAAO,IAAI,KAAK,EAAE;GAC3B,WAAY,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,KAAK,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;GAC1E,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,EAAE,KAAK,CAAC,CAAC;GAChD,IAAK,CAAC,QAAQ,CAAC,kBAAkB,EAAE,WAAW,CAAC,CAAC;GAC/C,MAAM;GACP,WAAY,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,KAAK,GAAG,IAAI,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;GAClF,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,EAAE,WAAW,CAAC,CAAC;GACrD;;EAED,IAAI,KAAK,IAAI,IAAI,CAAC,QAAQ,EAAE;GAC3B,IAAI,IAAI,CAAC,OAAO,IAAI,KAAK,EAAE;IAC3B,IAAK,CAAC,QAAQ,CAAC,oBAAoB,EAAE,QAAQ,CAAC,CAAC;IAC9C,MAAM;IACN,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;IACtB;GACD;EACD,MAAM;EACN,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;EACtD;CACF,OAAQ,CAAC,CAAC;EACT;;AAEF,gBAAC,4BAAQ,CAAC,EAAE;CACV,IAAI,CAAC,IAAI,IAAI,EAAE;EACf,IAAK,CAAC,EAAE;GACN,IAAI,IAAI,CAAC,OAAO,IAAI,KAAK,EAAE;IAC3B,IAAK,CAAC,QAAQ,CAAC,oBAAoB,EAAE,QAAQ,CAAC,CAAC;IAC9C,MAAM;IACN,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;IACtB;GACD,MAAM;GACN,IAAI,IAAI,CAAC,OAAO,IAAI,KAAK,EAAE;IAC3B,IAAK,CAAC,QAAQ,CAAC,oBAAoB,EAAE,QAAQ,CAAC,CAAC;IAC9C,MAAM;IACN,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;IACtB;GACD;EACD,MAAM;EACN,IAAI,IAAI,CAAC,OAAO,IAAI,KAAK,EAAE;GAC1B,OAAO,IAAI,CAAC,QAAQ,CAAC,oBAAoB,CAAC,CAAC;GAC3C,MAAM;GACN,OAAO,IAAI,CAAC,MAAM,EAAE,CAAC;GACrB;EACD;EACD;;AAEF,gBAAC,sCAAa,KAAK,EAAE;CACnB,IAAI,KAAK,IAAI,IAAI,EAAE;EAClB,IAAI,CAAC,OAAO,GAAG,SAAS,CAAC,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;EAC/C,IAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;EACzE,MAAM;EACNA,IAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC;EACvD,IAAK,IAAI,EAAE;GACV,IAAK,CAAC,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;GAChC,IAAI;GACL,IAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;GACzE;EACD,OAAO,IAAI,CAAC,OAAO,CAAC;EACpB;EACD;;AAEF,gBAAC,8BAAS,KAAK,EAAE;CACf,IAAI,KAAK,IAAI,IAAI,EAAE;EACnB,IAAK,CAAC,YAAY,CAAC;GAClB,GAAI,EAAE,KAAK;GACV,CAAC,CAAC;EACH,MAAM;EACN,OAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC;EAC9C;EACD;;AAEF,gBAAC,8BAAS,KAAK,EAAE;CACf,IAAI,KAAK,IAAI,IAAI,EAAE;EAClB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,EAAE,KAAK,CAAC,CAAC;EAC9C;CACD,OAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC;EAC9C;;AAEF,gBAAC,sCAAa,CAAC,EAAE;CACf,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,EAAE;EAC3BA,IAAI,WAAW,GAAG,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC;EACxE,IAAI,CAAC,IAAI,IAAI,EAAE;GACd,IAAI,WAAW,GAAG,IAAI,EAAE;IACxB,IAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,EAAE,UAAU,CAAC,WAAW,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;IAClF;GACD;EACF,OAAQ,UAAU,CAAC,WAAW,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;EAC7C;EACD;;AAEF,gBAAC,oCAAa;CACZ,OAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC;EAChD;;AAEF,gBAAC,oCAAa;CACZ,IAAI,IAAI,CAAC,WAAW,IAAE,OAAO,MAAM,GAAC;CACrC,IAAK,GAAG,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;CAC9B,IAAI,GAAG,IAAI,IAAI,EAAE;EAChB,IAAI,CAAC,OAAO,CAAC,iBAAiB,EAAE,kDAAkD,GAAG,IAAI,CAAC,MAAM,GAAG,gCAAgC,CAAC,CAAC;EACtI,OAAQ,OAAO,CAAC;EACf;CACF,IAAK,GAAG,GAAG,IAAI,CAAC,MAAM,GAAG,YAAY,CAAC;CACtC,IAAK,MAAM,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;CAC1B,IAAI,MAAM,CAAC,QAAQ,EAAE,IAAI,MAAM,EAAE;EACjC,IAAK,GAAG,GAAG,YAAY,CAAC,IAAI,CAAC,CAAC;EAC7B,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,GAAG,GAAG,2BAA2B,GAAG,GAAG,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC;EAC9E,MAAM;EACN,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;EACzB,IAAK,gBAAgB,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC;EACtC,IAAK,gBAAgB,EAAE;GACrB,QAAQ,gBAAgB;;IAEvB,KAAK,eAAe;KACnB,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;KAC1B,MAAM;;IAEP,KAAK,SAAS;KACb,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;KAC1B,MAAM;;;;;;;IAOP;GACD;EACD;;CAED,OAAO,MAAM,CAAC,QAAQ,EAAE,CAAC;EACzB;AACF,gBAAC,6CAAiB;;EAEhB;AACF,gBAAC,gCAAU,KAAU,EAAE;+BAAP,GAAG;;CAClB,IAAK,CAAC,IAAI,CAAC,WAAW,IAAE,OAAO,MAAM,GAAC;CACtC,IAAK,GAAG,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;CAC9BA,IAAI,MAAM,GAAG,OAAO,CAAC;CACrB,IAAI,GAAG,IAAI,IAAI,EAAE;EAChB,IAAI,CAAC,OAAO,CAAC,iBAAiB,EAAE,kDAAkD,GAAG,IAAI,CAAC,MAAM,GAAG,4BAA4B,CAAC,CAAC;EAClI,OAAQ,OAAO,CAAC;EACf,MAAM;EACNA,IAAI,OAAO,GAAG,KAAK,CAAC;EACpBA,IAAI,SAAS,GAAG,KAAK,CAAC;;EAEvB,IAAK,KAAK,KAAK,QAAQ,IAAI,KAAK,KAAK,QAAQ,EAAE;GAC7C,IAAI,IAAI,CAAC,OAAO,KAAK,KAAK,EAAE;IAC5B,SAAU,GAAG,QAAQ,CAAC;IACrB,MAAM;IACP,SAAU,GAAG,QAAQ,CAAC;IACrB;GACD;;EAED,IAAI,IAAI,CAAC,iBAAiB,KAAK,WAAW,IAAI,IAAI,CAAC,iBAAiB,KAAK,QAAQ,EAAE;GACnF,SAAU,GAAG,SAAS,CAAC;GACtB;;EAED,GAAG,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,IAAE,SAAS,GAAG,IAAI,CAAC,SAAS,GAAC;;EAElE,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;EAC1B,GAAG,UAAU,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;GACnC,IAAI,CAAC,eAAe,EAAE,CAAC;GACvB;EACD,OAAO,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC;;;EAGxBA,IAAI,UAAU,GAAG,IAAI,CAAC;EACtBA,IAAI,GAAG,GAAG,WAAW,CAAC;EACtB,IAAI,IAAI,CAAC,OAAO,KAAK,KAAK,EAAE;GAC5B,OAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,eAAe,EAAE,SAAS,CAAC,CAAC;GACrD,GAAI,GAAG,WAAW,CAAC;GAClB,UAAU,GAAG,SAAS,CAAC,EAAE;IACxB,OAAO,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;IACxB,CAAC;GACF,MAAM;GACP,OAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE,SAAS,CAAC,CAAC;GAChD,GAAI,GAAG,WAAW,CAAC;GAClB,UAAU,GAAG,SAAS,CAAC,EAAE;IACxB,OAAO,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;IACxB,CAAC;GACF;EACD,IAAI,OAAO,IAAI,MAAM,EAAE;GACtB,MAAM,GAAG,UAAU,CAAC,EAAE,CAAC,CAAC;GACxB,IAAI,MAAM,CAAC,QAAQ,EAAE,IAAI,MAAM,EAAE;IACjC,IAAK,GAAG,GAAG,YAAY,CAAC,IAAI,CAAC,CAAC;IAC7B,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,GAAG,GAAG,2BAA2B,GAAG,GAAG,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;IAC7E;GACD;EACD;;CAED,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;CACzB,IAAI,IAAI,CAAC,QAAQ,IAAI,MAAM,EAAE;EAC7B,IAAK,CAAC,QAAQ,GAAG,MAAM,CAAC,QAAQ,EAAE,CAAC;EAClC;CACD,OAAO,MAAM,CAAC,QAAQ,EAAE,CAAC;EACzB;AACF,gBAAC,8BAAS,SAAS,EAAE;CACpB,IAAK,GAAG,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;CAC9BA,IAAI,MAAM,GAAG,EAAE,CAAC;CACjB,IAAK,GAAG,GAAG,IAAI,CAAC,MAAM,GAAG,UAAU,CAAC;CACnC,IAAI,GAAG,IAAI,IAAI,EAAE;EACjB,IAAK,CAAC,OAAO,CAAC,iBAAiB,EAAE,iFAAiF,CAAC,CAAC;EACnH,MAAM,IAAI,CAAC,IAAI,CAAC,WAAW,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,EAAE;EACpD,IAAK,GAAG,GAAG,YAAY,CAAC,IAAI,CAAC,CAAC;EAC7B,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,GAAG,GAAG,0EAA0E,GAAG,GAAG,CAAC,IAAI,CAAC,CAAC;EAC/G,MAAM;EACP,MAAO,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC;;EAE9B,IAAK,KAAK,GAAG,YAAY,CAAC,IAAI,CAAC,CAAC;EAChC,IAAK,KAAK,CAAC,IAAI,IAAI,QAAQ,CAAC,IAAI,EAAE;;GAEhC,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,GAAG,GAAG,GAAG,GAAG,SAAS,GAAG,cAAc,GAAG,KAAK,CAAC,IAAI,GAAG,IAAI,GAAG,KAAK,CAAC,MAAM,EAAE,UAAU,EAAE,SAAS,CAAC,CAAC;GACvH,MAAO,GAAG,EAAE,CAAC;GACZ,MAAM;GACN,QAAQ,SAAS;IACjB,KAAM,wBAAwB,CAAC;IAC9B,KAAK,uBAAuB;KAC3B,IAAI,CAAC,iBAAiB,GAAG,MAAM,CAAC;KAChC,MAAM;;;;;IAKP;GACD;EACD;CACD,OAAO,MAAM,CAAC,QAAQ,EAAE,CAAC;EACzB;AACF,gBAAC,8BAAS,SAAS,EAAE,KAAK,EAAE;CAC3B,IAAK,GAAG,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;CAC9BA,IAAI,MAAM,GAAG,OAAO,CAAC;CACtB,IAAK,GAAG,GAAG,IAAI,CAAC,MAAM,GAAG,UAAU,CAAC;CACnC,IAAI,GAAG,IAAI,IAAI,EAAE;EACjB,IAAK,CAAC,OAAO,CAAC,iBAAiB,EAAE,iFAAiF,CAAC,CAAC;EACnH,MAAM,IAAI,CAAC,IAAI,CAAC,WAAW,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,EAAE;EACpD,IAAK,GAAG,GAAG,YAAY,CAAC,IAAI,CAAC,CAAC;EAC7B,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,GAAG,GAAG,0EAA0E,GAAG,GAAG,CAAC,IAAI,CAAC,CAAC;EAC/G,MAAM;EACP,MAAO,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;EACpC,IAAI,MAAM,CAAC,QAAQ,EAAE,IAAI,MAAM,EAAE;GACjC,IAAKE,KAAG,GAAG,YAAY,CAAC,IAAI,CAAC,CAAC;GAC7B,IAAI,CAAC,OAAO,CAACA,KAAG,EAAE,GAAG,GAAG,GAAG,GAAG,SAAS,GAAG,IAAI,GAAG,KAAK,GAAG,cAAc,GAAGA,KAAG,CAAC,IAAI,GAAG,IAAI,GAAGA,KAAG,CAAC,MAAM,EAAE,UAAU,EAAE,SAAS,CAAC,CAAC;GAC/H,MAAM;GACP,IAAK,SAAS,KAAK,wBAAwB,IAAI,SAAS,KAAK,uBAAuB,EAAE;IACpF,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;IAC/B;GACD;EACD;;CAED,OAAO,MAAM,CAAC,QAAQ,EAAE,CAAC;EACzB;AACF,gBAAC,4BAAS;CACT,IAAK,GAAG,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;CAC9BF,IAAI,MAAM,GAAG,OAAO,CAAC;CACtB,IAAK,GAAG,GAAG,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC;CACjC,IAAI,GAAG,IAAI,IAAI,EAAE;EACjB,IAAK,CAAC,OAAO,CAAC,iBAAiB,EAAE,+EAA+E,CAAC,CAAC;EACjH,MAAM,IAAI,CAAC,IAAI,CAAC,WAAW,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,EAAE;EACpD,IAAK,GAAG,GAAG,YAAY,CAAC,IAAI,CAAC,CAAC;EAC7B,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,GAAG,GAAG,0EAA0E,GAAG,GAAG,CAAC,IAAI,CAAC,CAAC;EAC/G,MAAM;EACP,MAAO,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;EACtB,IAAI,MAAM,IAAI,MAAM,EAAE;GACtB,IAAKE,KAAG,GAAG,YAAY,CAAC,IAAI,CAAC,CAAC;GAC7B,IAAI,CAAC,OAAO,CAACA,KAAG,EAAE,GAAG,GAAG,wBAAwB,GAAGA,KAAG,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;GACvE;EACD;;CAED,OAAO,MAAM,CAAC,QAAQ,EAAE,CAAC;EACzB;AACF,gBAAC,wCAAe;CACf,IAAK,GAAG,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;CAC9B,IAAI,GAAG,IAAI,IAAI,EAAE;;EAEhB,OAAO,iBAAiB,CAAC,IAAI,CAAC;EAC9B;CACD,OAAO,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,cAAc,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC;EACtD;AACF,gBAAC,0CAAe,SAAS,EAAE;CAC1B,IAAK,GAAG,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;CAC9B,IAAI,GAAG,IAAI,IAAI,EAAE;EAChB,OAAO,iBAAiB,CAAC,MAAM,CAAC;EAChC;CACD,OAAO,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,gBAAgB,CAAC,CAAC,SAAS,CAAC,CAAC,QAAQ,EAAE,CAAC;EACjE;AACF,gBAAC,wCAAc,SAAS,EAAE;CACzB,IAAK,GAAG,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;CAC9B,IAAI,GAAG,IAAI,IAAI,EAAE;EACjB,OAAQ,qFAAqF,CAAC;EAC7F;CACD,OAAO,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,eAAe,CAAC,CAAC,SAAS,CAAC,CAAC,QAAQ,EAAE,CAAC;EAChE;AACF,gBAAC,wCAAe;CACd,IAAI,IAAI,CAAC,GAAG,IAAI,IAAI,EAAE;EACtB,IAAK,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC;EACzB;CACD,OAAO,IAAI,CAAC,GAAG,CAAC;EAChB;AACF,gBAAC,4BAAQ,GAAG,EAAE;CACZF,IAAI,GAAG,GAAG,IAAI,CAAC;CACfA,IAAI,YAAY,GAAG,CAAC,CAAC;CACtB,OAAQ,CAAC,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW;GAClC,GAAG,CAAC,MAAM,CAAC;GACX,GAAG,CAAC,MAAM,IAAI,GAAG,CAAC;GAClB,YAAY,IAAI,GAAG,CAAC,EAAE;EACxB,YAAa,EAAE,CAAC;EACf,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC;EACjB;CACD,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC;CAClB,IAAI,GAAG,CAAC,WAAW,IAAI,IAAI,IAAI,GAAG,CAAC,GAAG,IAAI,IAAI,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,EAAE;EACvE,IAAI,IAAI,CAAC,OAAO,IAAI,KAAK,EAAE;GAC1B,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;GACpB,GAAG,GAAG,GAAG,CAAC,GAAG,CAAC;GACd;EACD,IAAI,IAAI,CAAC,OAAO,IAAI,MAAM,EAAE;GAC3B,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;GACjB,GAAG,GAAG,GAAG,CAAC,WAAW,CAAC;GACtB;EACD,MAAM;EACN,IAAI,GAAG,CAAC,WAAW,EAAE;GACpB,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;GACtB,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;GACjB,GAAG,GAAG,GAAG,CAAC,WAAW,CAAC;GACtB,MAAM,IAAI,GAAG,CAAC,GAAG,EAAE;GACnB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;GACrB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;GACpB,GAAG,GAAG,GAAG,CAAC,GAAG,CAAC;GACd;EACD;CACF,OAAQ,GAAG,CAAC;EACX;AACF,gBAAC,4BAAS;CACT,IAAK,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;;CAElC,IAAI,CAAC,MAAM,IAAI,MAAM,CAAC,MAAM,IAAI,MAAM,CAAC,MAAM,IAAI,MAAM,EAAE;EACzD,MAAO,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;EACrC;;CAEF,IAAK,CAAC,MAAM,IAAI,MAAM,CAAC,MAAM,IAAI,MAAM,CAAC,MAAM,EAAE;EAC/C,MAAO,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;EACrC;;CAED,IAAI,CAAC,MAAM,IAAI,MAAM,CAAC,GAAG,IAAI,MAAM,CAAC,GAAG,CAAC,MAAM,EAAE;EAC/C,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;EACzC;;;CAGF,IAAK,CAAC,MAAM,IAAI,MAAM,CAAC,GAAG,IAAI,MAAM,CAAC,GAAG,CAAC,MAAM,IAAI,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ,EAAE;EAC7E,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;EAClD;;CAEF,OAAQ,MAAM,CAAC;EACd;;;;AAIF,gBAAC,wCAAc,KAAK,EAAE;CACpB,IAAI,IAAI,CAAC,OAAO,KAAK,MAAM,IAAE,SAAO;CACrC,IAAK,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,uBAAuB,CAAC,CAAC;CACjDA,IAAI,QAAQ,GAAG,CAAC,CAAC,CAAC;;CAElB,KAAKA,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,EAAE,CAAC,EAAE;EAC7B,IAAI,IAAI,CAAC,QAAQ,CAAC,iBAAiB,GAAG,CAAC,GAAG,KAAK,CAAC,IAAI,KAAK,EAAE;GAC3D,QAAS,GAAG,CAAC,CAAC;GACb,MAAM;GACN;EACD;;CAED,IAAI,QAAQ,IAAI,CAAC,CAAC,EAAE;EACnB,IAAI,CAAC,OAAO,CAAC,iBAAiB,EAAE,YAAY,GAAG,KAAK,GAAG,aAAa,CAAC,CAAC;EACvE,QAAS,GAAG,GAAG,CAAC;EAChB,IAAK,CAAC,OAAO,CAAC,iBAAiB,EAAE,kCAAkC,GAAG,QAAQ,CAAC,CAAC;EAC/E,IAAI,CAAC,QAAQ,CAAC,iBAAiB,GAAG,QAAQ,GAAG,KAAK,EAAE,KAAK,CAAC,CAAC;EAC3D;CACF,OAAQ,QAAQ,CAAC;EAChB;;;;;;AAMF,gBAAC,wCAAc,EAAE,EAAE;CACjB,IAAI,IAAI,CAAC,OAAO,KAAK,MAAM,IAAE,SAAO;CACrC,IAAK,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,CAAC;CAC3CA,IAAI,KAAK,GAAG,CAAC,CAAC,CAAC;;;;CAIhB,IAAK,GAAG,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE;EAC/B,KAAKA,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,EAAE,CAAC,EAAE;GAC7B,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,GAAG,CAAC,GAAG,KAAK,CAAC,IAAI,EAAE,EAAE;IAClD,KAAM,GAAG,CAAC,CAAC;IACV,MAAM;IACN;GACD;;EAED,IAAI,KAAK,IAAI,CAAC,CAAC,EAAE;GAChB,IAAI,CAAC,OAAO,CAAC,iBAAiB,EAAE,aAAa,GAAG,EAAE,GAAG,aAAa,CAAC,CAAC;GACpE;EACD;;CAEF,OAAQ,KAAK,CAAC;CACb;;;;"}